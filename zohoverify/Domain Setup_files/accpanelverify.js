function autoResize(id){var newheight=document.getElementById(id).contentWindow.document.body.scrollHeight,newwidth=document.getElementById(id).contentWindow.document.body.scrollWidth;$a("cnameMainDiv").height=newheight+"px",document.getElementById(id).height=newheight+"px",document.getElementById(id).width=newwidth+"px"}function checkChild(){oauthChildWin.closed&&(clearInterval(timer),hideMaskDiv())}function findPosX(obj){var curleft=0;if($||document.all)for(;obj.offsetParent;)curleft+=obj.offsetLeft,obj=obj.offsetParent;else document.layers&&(curleft+=obj.x);return curleft}function findPosY(obj){var curtop=0;if($||document.all)for(;obj.offsetParent;)curtop+=obj.offsetTop,obj=obj.offsetParent;else document.layers&&(curtop+=obj.y);return curtop}function isEmpty(str){var temp=str.trim();return temp.length>0?!1:!0}function getInternetExplorerVersion(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}var verify_status=1,mailaccount_status=2,adduser_status=3,groups_status=4,mx_status=5,migration_status=6,mail_client_status=7,docs_configure_status=8,claim_referral_status=9,mobileaccess_status=10,done_status=11,setupStatus=0,bodyheight="",leftOption="";$(document).ready(function(){$a("choose_method").value=0}),pshtoGA=function(event){try{zcTrackClick("setupwizard",event,"mail")}catch(e){}};var maskEle="maskDiv";showMaskDiv=function(){var ele=$a(maskEle);showElement(maskEle),ele.style.height=document.documentElement.clientWidth+"px"},hideMaskDiv=function(){hideElement(maskEle)},resize=function(){$a("div_height").style.height=bodyheight-82+"px"},onload=function(){document.body.clientHeight;if(1==domainSize&&(leftOption="&left=false"),cpAjax(conPath+"/orgAct.do",getOrgSetupStatusParam(),function(result){""!=result&&(setupStatus=parseInt(result.st),0===setupStatus?(setupStatus=isDomainVerified?isMBExists?adduser_status:mailaccount_status:verify_status,cpAjax(conPath+"/orgAct.do",addOrgSetupStatusParam(setupStatus),function(){isDomainVerified?isMailHosted?mailHostDomainCallBack():mailHostDomain():gotoVerifyPage(),hideElement("lodingDiv")})):isDomainVerified?(isMailHosted?mailHostDomainCallBack():mailHostDomain(),hideElement("lodingDiv")):setupStatus>verify_status?cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(verify_status),function(){gotoVerifyPage(),hideElement("lodingDiv")}):gotoVerifyPage())}),hideElement("maskDiv"),"true"===fromCpanelWarn)showElement("maskDiv"),showElement("fromCpanelWarnDiv"),setCookie("dmnRetUrl","frmCpanel",1);else try{-1!=document.referrer.indexOf("/biz/")&&setCookie("dmnRetUrl","fromBiz",1)}catch(err){}"undefined"!=typeof liveChatScriptUrl&&$.getScript(liveChatScriptUrl,function(){_ZLD&&1==_ZLD.online&&chkIdle()})},closefromCpanelWarn=function(){hideElement("maskDiv"),hideElement("fromCpanelWarnDiv")},closeconfirmdomainedit=function(newDomain){hideElement("maskDiv"),hideElement("confirmdomainedit"),window.location.href=conPath+"/verify.do?dname="+newDomain};var selectMenu=function(obj){$a("verifySetup")&&($a("verifySetup").className=""),$a("add_Users")&&($a("add_Users").className=""),$a("add_Group")&&($a("add_Group").className=""),$a("change_Mx")&&($a("change_Mx").className=""),$a("migrate_user")&&($a("migrate_user").className=""),$a("mobileAccess")&&($a("mobileAccess").className=""),$a("claim_referral")&&($a("claim_referral").className=""),$a("mail_client")&&($a("mail_client").className=""),$a("docs_setup")&&($a("docs_setup").className=""),null!=obj&&(obj.className="selec")},bindMenuClick=function(status){status>verify_status&&($a("domaintick").className="ticksel",$a("verifySetup").style.cursor="default"),$a("add_Users")&&status>adduser_status&&($a("addusertick").className="ticksel",$a("add_Users").className="cursorselect",$a("add_Users").onclick=function(){gotoNextPage(adduser_status)}),$a("add_Group")&&status>groups_status&&($a("groupick").className="ticksel",$a("add_Group").className="cursorselect",$a("add_Group").onclick=function(){gotoNextPage(groups_status)}),$a("change_Mx")&&status>mx_status&&($a("recordtick").className="ticksel",$a("change_Mx").className="cursorselect",$a("change_Mx").onclick=function(){gotoNextPage(mx_status)}),$a("migrate_user")&&status>migration_status&&($a("migratetick").className="ticksel",$a("migrate_user").className="cursorselect",$a("migrate_user").onclick=function(){gotoNextPage(migration_status)}),$a("mail_client")&&status>mail_client_status&&($a("mailclienttick").className="ticksel",$a("mail_client").className="cursorselect",$a("mail_client").onclick=function(){gotoNextPage(mail_client_status)}),$a("docs_setup")&&status>docs_configure_status&&($a("docssetuptick").className="ticksel",$a("docs_setup").className="cursorselect",$a("docs_setup").onclick=function(){gotoNextPage(docs_configure_status)}),$a("claim_referral")&&status>claim_referral_status&&($a("referraltick").className="ticksel",$a("claim_referral").className="cursorselect",$a("claim_referral").onclick=function(){gotoNextPage(claim_referral_status)}),$a("mobileAccess")&&status>mobileaccess_status&&(isBaihui||($a("mobiletick").className="ticksel",$a("mobileAccess").className="cursorselect",$a("mobile_Sync").style.display="none",$a("mobileAccess").onclick=function(){gotoNextPage(mobileaccess_status)})),hideElement("lodingDiv")},closeAllDiv=function(){$a("alreadyverifeddomain").style.display="none",$a("verify_domain").style.display="none",$a("confirmPopdiv").style.display="none",$a("confirmTxtPopdiv").style.display="none",$a("add_Userspage").style.display="none",$a("createGrpHelp").style.display="none",$a("alreadymxpoint").style.display="none",$a("mxpoint_Steps").style.display="none",$a("migrateUser").style.display="none",$a("mobile_Sync").style.display="none",$a("admin_Acccount").style.display="none",$a("setupdone_Div").style.display="none",$a("previous_button").style.display="none",$a("next_button").style.display="none",$a("done_button1").style.display="none",$a("cname_button").style.display="none",$a("html_button").style.display="none",$a("txt_button").style.display="none",$a("done_button").style.display="none",$a("addUserButton").style.display="none",$a("groupPageButton").style.display="none",$a("migrationButton").style.display="none",$a("mailAccountButton").style.display="none",$a("docsSetupHelp").style.display="none",$a("docsSetupButton").style.display="none",$a("oauth_button").style.display="none",$a("claimReferralDiv")&&($a("claimReferralDiv").style.display="none"),$a("mailClientHelp").style.display="none"},openDiv=function(status){if(closeAllDiv(),$("#next_button").text(status>=setupStatus?$a("skipButtonText").value:$a("nextButtonText").value),$(window).scrollTop(0),status==verify_status)gotoVerifyPage();else if(status==mailaccount_status)$a("domaintick").className="ticksel",$a("admin_Acccount").style.display="";else if(status==adduser_status)selectMenu($a("add_Users")),$a("next_button").style.display="",$a("next_button").setAttribute("onClick","javascript:gotoNextPage(groups_status);"),$a("add_Userspage").style.display="",$a("addUserButton").style.display="";else if(status==groups_status)selectMenu($a("add_Group")),$a("previous_button").style.display="",$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(adduser_status);"),$a("next_button").style.display="",$a("next_button").setAttribute("onClick","javascript:gotoNextPage(mx_status);"),$a("createGrpHelp").style.display="",$a("groupPageButton").style.display="";else if(status==mx_status){selectMenu($a("change_Mx")),orgHasVerifiedDomains?$a("done_button1").style.display="":($a("previous_button").style.display="",$a("next_button").style.display="",$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(groups_status);"),$("#next_button").text($a("nextButtonText").value),$a("next_button").setAttribute("onClick","javascript:gotoNextPage(migration_status);")),"true"==mxRecord?($a("alreadymxpoint").style.display="",$a("change_Mx").style.cursor="pointer"):($a("verify_domain").style.display="none",$a("mxpoint_Steps").style.display="");var mxElmObj={contentDiv:"#mxhelpdiv",combo:"#choosemx_method"};setHlpDisp(domPrvHlp,domPrvHlp_lang,mxElmObj),setScroll()}else if(status==migration_status)selectMenu($a("migrate_user")),$a("previous_button").style.display="",$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(mx_status);"),$a("next_button").style.display="",$a("next_button").setAttribute("onClick","javascript:gotoNextPage(mail_client_status);"),$a("migrationButton").style.display="",$a("migrateUser").style.display="";else if(status==mail_client_status)selectMenu($a("mail_client")),$a("previous_button").style.display="",$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(migration_status);"),$("#next_button").text($a("nextButtonText").value),$a("next_button").style.display="",$a("docs_setup")?$a("next_button").setAttribute("onClick","javascript:gotoNextPage(docs_configure_status);"):$a("claim_referral")?$a("next_button").setAttribute("onClick","javascript:gotoNextPage(claim_referral_status);"):$a("next_button").setAttribute("onClick","javascript:gotoNextPage(mobileaccess_status);"),$a("mailClientHelp").style.display="";else if(status==docs_configure_status)selectMenu($a("docs_setup")),$a("previous_button").style.display="",$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(mail_client_status);"),$("#next_button").text($a("nextButtonText").value),$a("next_button").style.display="",$a("claim_referral")?$a("next_button").setAttribute("onClick","javascript:gotoNextPage(claim_referral_status);"):$a("next_button").setAttribute("onClick","javascript:gotoNextPage(mobileaccess_status);"),$a("docsSetupHelp").style.display="",$a("docsSetupButton").style.display="";else if(status==claim_referral_status)selectMenu($a("claim_referral")),$a("previous_button").style.display="",$a("docs_setup")?$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(docs_configure_status);"):$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(mail_client_status);"),$a("next_button").style.display="",$a("next_button").setAttribute("onClick","javascript:gotoNextPage(mobileaccess_status);"),$a("claimReferralDiv").style.display="";else if(status==mobileaccess_status)selectMenu($a("mobileAccess")),$a("previous_button").style.display="",$a("claim_referral")?$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(claim_referral_status);"):$a("docs_setup")?$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(docs_configure_status);"):$a("previous_button").setAttribute("onClick","javascript:gotoNextPage(mail_client_status);"),$a("next_button").style.display="",$a("next_button").setAttribute("onClick","javascript:gotoNextPage(done_status);"),$a("mobile_Sync").style.display="";else if(status==done_status){selectMenu(null);var burl="https://"+businessHost+"/biz/index.do";$a("done_button").value=$a("proceedBizMail").value;try{var cookieValue=getCookie("dmnRetUrl");void 0!=cookieValue&&("frmCpanel"===cookieValue?(burl="/cpanel/index.do",$a("done_button").value=$a("proceedCpanel").value):"fromDomain"===cookieValue&&(burl="/cpanel/index.do?tabmode=domain",$a("done_button").value=$a("proceedCpanel").value))}catch(err){}$a("done_button").setAttribute("onClick","javascript:gotoBizControlPanel('"+burl+"');"),$a("done_button").style.display="",$a("setupdone_Div").style.display=""}bindMenuClick(status)},setScroll=function(){var topBndPos=$(".navigationList").outerHeight()+$(".navigationList").offset().top,topBndPos1=$("#cnameblk1").offset().top,bndWidth=$("#div_height").next().outerWidth(),mainDiv=$("body>div");mainDiv.css("height",$(window).height()+"px"),mainDiv.scroll(function(){var curScrollPos=mainDiv[0].scrollTop;$("#div_height>ul").css(curScrollPos>topBndPos?{position:"fixed",width:"230px",top:"0px"}:{position:"",width:"",top:""}),$("#cnameblk1").is(":visible")&&(topBndPos1=1>topBndPos1?$("#cnameblk1").offset().top:topBndPos1,curScrollPos>topBndPos1?($("#cnameblk2").css("height",$("#cnameblk1").outerHeight()+"px").show(),$("#cnameblk1").css({position:"fixed",width:bndWidth+"px",top:"0px","background-color":"#fff","box-shadow":"0 6px 7px -6px rgba(0, 0, 0, 0.4)","margin-left":"-20px","padding-left":"20px"})):($("#cnameblk2").hide(),$("#cnameblk1").css({position:"",width:"",top:"","background-color":"","box-shadow":"","margin-left":"","padding-left":""})))}),$("#signoutDialog").css("height","auto"),$("#mask_div").css("height","100%"),$("#fromCpanelWarnDiv").css("height","auto")};getOrgSetupStatusParam=function(){var param={};return param.mode="getOrgSetupStatus",param=addZOIDinReqUrl(param,"param")},updateOrgSetupStatusParam=function(status){var param={};return param.mode="updateOrgSetupStatus",param=addZOIDinReqUrl(param,"param"),param.status=status+"",param},addOrgSetupStatusParam=function(status){var param={};return param.mode="addOrgSetupStatus",param=addZOIDinReqUrl(param,"param"),param.status=status+"",param},gotoVerifyPage=function(){closeAllDiv(),isDomainVerified?(selectMenu($a("verifySetup")),$a("alreadyverifeddomain").style.display="",$a("domaintick").className="ticksel",$a("verify_domain").style.display="none",$("#next_button").text($a("nextButtonText").value),isMBExists?isMailHosted?mailHostDomainCallBack():mailHostDomain():($a("next_button").style.display="",$a("next_button").onclick=isMailHosted?function(){mailHostDomainCallBack()}:function(){mailHostDomain()}),$a("verifySetup").style.cursor="default"):($a("verify_domain").style.display="",$a("alreadyverifeddomain").style.display="none",$("#div_height ul li.selec").removeClass("selec"),$("#div_height ul li#verifySetup").addClass("selec"),$a("verify_domain").style.display="",$a("alreadyverifeddomain").style.display="none",setScroll(),pshtoGA("verification_step")),hideElement("lodingDiv")};var setHlpDisp=function(mlst,lang,elmObj){setHlpDisp.lang=lang,setHlpDisp.mlst=mlst,setHlpDisp.hlpdv=$(elmObj.contentDiv),setHlpDisp.mxhlp=!1,setHlpDisp.gnrl=0;var combo=$(elmObj.combo),tmp=document.createDocumentFragment();"#choosemx_method"==elmObj.combo&&(setHlpDisp.mxhlp=!0,hideElement("chosedomain.warnmsg"));for(var i in mlst){"general"==mlst[i].type&&(setHlpDisp.gnrl=i);var opt=document.createElement("option");$(opt).text(mlst[i].text),opt.className="oAuthSelectOption",opt.value=i,tmp.appendChild(opt)}combo.html(""),combo[0].appendChild(tmp),combo.unbind("change").change(function(){hideElement("chosedomain.warnmsg"),setHlpDisp.getContent($(this).val())})};setHlpDisp.getContent=function(n){var obj=setHlpDisp.mlst[n],hlpdv=setHlpDisp.hlpdv,mxhlp=setHlpDisp.mxhlp;mxhlp||($a("all_tab").style.display="",showGodaddyOAuth&&"godaddy"==obj.type?($a("oauth_div").style.display="",$a("oAuth_method").style.display="",changeMethod("4")):($a("oauth_div").style.display="none",$a("oAuth_method").style.display="none",changeMethod("1")));var cmsHelpDiv=$("#cmsHelpDiv"+(mxhlp?"mx":"")),htmlFile=obj.type+(mxhlp?"-mx":"")+".html";if(setHlpDisp.gnrl==n||"choose"==obj.type)hlpdv.show(),cmsHelpDiv.hide();else{cmsHelpDiv.show(),hlpdv.hide(),displayInnerEle("cmsHelpDiv"+(mxhlp?"mx":""),"iframe","none");var frameName="cmshelp"+(mxhlp?"mx":"")+obj.type,frame=$("#"+frameName);frame.length>0?(frame.show(),setIFrameHeight(frameName)):(frame=$1("iframe"),frame.id=frameName,frame.src=bizHelpLink+"/adminconsole/print/"+htmlFile,frame.width="100%",frame.height="1000px",frame.frameBorder="0",frame.setAttribute("onLoad",'setIFrameHeight("'+frameName+'");'),cmsHelpDiv.append(frame))}},setIFrameHeight=function(id){$a(id).height=$a(id).contentWindow.document.body.offsetHeight+100+"px"},displayInnerEle=function(id,ele,mode){$a(id).style.display="";for(var divs=$a(id).getElementsByTagName(ele),i=0;i<divs.length;i++)divs[i].style.display=mode},editRename=function(){displayDiv($a("saveRename")),showElement("renameText"),hideElement("editRename"),hideElement("domainRename"),$a("renameText").value=mail_domain,$("#renameText").focus()},cancelRename=function(){hideElement("saveRename"),showElement("editRename"),showElement("domainRename"),hideElement("renameText")},saveRename=function(){var newDomain=$.trim($a("renameText").value);if(0==newDomain.indexOf("www.")&&(newDomain=newDomain.substring(newDomain.indexOf("www.")+4)),mail_domain.trim()===newDomain)return void cancelRename();if(null===newDomain||""===newDomain)return void showErrMsg($a("notempty").value);if(newDomain.match("'")||newDomain.match('"'))return void showErrMsg($a("cannotvalidatedomnam").value);if(!newDomain.match(domainExp))return void showErrMsg($a("invaliddomspe").value);var param={};param.mode="renameDomain",param.newDomainName=newDomain,param.oldDomainName=mail_domain,param=addZOIDinReqUrl(param,"param"),cpAjax(conPath+"/domainAct.do",param,function(resultData){"true"===resultData.st&&(showElement("confirmdomainedit"),$a("savedomainrename").setAttribute("onclick","javascript:closeconfirmdomainedit('"+newDomain+"');"))})},changeMethod=function(mode){hideElement("next_button"),hideElement("previous_button"),$a("cname_method_tab").className="zatabunsel",$a("html_method_tab").className="zatabunsel",$a("txt_method_tab").className="zatabunsel",$a("oauth_method_tab").className="zatabunsel",hideElement("cname_method"),hideElement("html_method"),hideElement("txt_method"),hideElement("oAuth_method"),hideElement("cname_button"),hideElement("html_button"),hideElement("txt_button"),hideElement("txt_button"),hideElement("oauth_button"),$("#cnameblk1,#cnameblk2").hide(),"1"==mode?($a("cname_method_tab").className="zatabsel",showElement("cname_button"),showElement("cname_method"),$("#cnameblk1").show()):"2"==mode?($a("html_method_tab").className="zatabsel",showElement("html_method"),showElement("html_button")):"3"==mode?($a("txt_method_tab").className="zatabsel",showElement("txt_method"),showElement("txt_button")):"4"==mode&&($a("oauth_method_tab").className="zatabsel",showElement("oAuth_method"),showElement("oauth_button"))};var oauthChildWin,timer;showGodaddyLoginPage=function(){var settings="fullscreen=no,location=yes,menubar=no,titlebar=yes,directories=no,status=yes,toolbar=no,resizable=no,width=780,height=785";oauthChildWin=window.open("https://dcc.godaddy.com/manage/"+mail_domain+"/connectto/Zoho-email?","gdoauth",settings),timer=setInterval(checkChild,1e3),showMaskDiv()},validateCNAME=function(){showElement("maskDiv"),$a("maskDiv").style.height=document.body.clientHeight+20+"px",$a("confirmPopdiv").style.display="",$a("verify_domain").style.display=""},_validateCNAME=function(){pshtoGA("cname_verification"),$a("confirmPopdiv").style.display="none",$a("verify_domain").style.display="";var param={};param.mode="vCNAME",param.domainName=mail_domain,param.dontValidate=!0,cpAjax(conPath+"/domainAct.do",param,function(resultData){callbackCNAME(resultData),hideElement("lodingDiv")})},callbackCNAME=function(result){var resultString=result[1].st;return $a("maskDiv").style.height=document.body.clientHeight+20+"px",hideElement("maskDiv"),isValidResult(result,!0)&&1==resultString?void mailHostDomain():(hideElement("confirmPopdiv"),hideElement("failed.trycname"),showElement("failed.trytxt"),showElement("failed.tryhtml"),hideElement("htmlfailhlp"),hideElement("txtfailhlp"),showElement("cnamefailhlp"),$("#valfailed").css("height","auto"),displayDiv($a("valfailed")),$a("admin_Acccount").style.display="none",pshtoGA("cname_verification_failed"),!1)},trycnameMethod=function(){hideElement("maskDiv"),$a("verify_domain").style.display="",hideElement("valfailed"),changeMethod("1")},validateTXT=function(){showElement("maskDiv"),$a("maskDiv").style.height=document.body.clientHeight+20+"px",$a("confirmTxtPopdiv").style.display=""},_validateTXT=function(){showElement("lodingDiv"),pshtoGA("txt_verification"),$a("confirmTxtPopdiv").style.display="none";var param={};param.mode="vTXT",param.domainName=mail_domain,param.dontValidate=!0,cpAjax(conPath+"/domainAct.do",param,function(resultData){callbackTXT(resultData),hideElement("lodingDiv")})},callbackTXT=function(result){var resultString=result[1].st;return $a("maskDiv").style.height=document.body.clientHeight+20+"px",hideElement("maskDiv"),isValidResult(result,!0)&&1==resultString?void mailHostDomain():(hideElement("confirmPopdiv"),showElement("failed.trycname"),hideElement("failed.trytxt"),showElement("failed.tryhtml"),hideElement("htmlfailhlp"),hideElement("cnamefailhlp"),showElement("txtfailhlp"),$("#valfailed").css("height","auto"),displayDiv($a("valfailed")),$a("admin_Acccount").style.display="none",pshtoGA("txt_verification_failed"),!1)},trytxtMethod=function(){hideElement("maskDiv"),$a("verify_domain").style.display="",hideElement("valfailed"),changeMethod("3")},validateHTML=function(){pshtoGA("html_verification"),$a("verify_domain").style.display="",showElement("maskDiv"),$a("maskDiv").style.height=document.body.clientHeight+20+"px";var param={};param.mode="vHTML",param.domainName=mail_domain,param.dontValidate=!0,cpAjax(conPath+"/domainAct.do",param,function(resultData){callbackHTML(resultData),hideElement("lodingDiv")})},callbackHTML=function(result){var resultString=result[1].st;return $a("maskDiv").style.height=document.body.clientHeight+20+"px",hideElement("maskDiv"),isValidResult(result,!0)&&1==resultString?void mailHostDomain():(hideElement("confirmPopdiv"),showElement("failed.trycname"),showElement("failed.trytxt"),hideElement("failed.tryhtml"),hideElement("cnamefailhlp"),hideElement("txtfailhlp"),showElement("htmlfailhlp"),$("#valfailed").css("height","auto"),displayDiv($a("valfailed")),$a("admin_Acccount").style.display="none",pshtoGA("html_verification_failed"),!1)},downloadHtml=function(){document.downloadhtml.domainName.value=mail_domain,document.downloadhtml.zmrcsr.value=csrfToken,document.downloadhtml.submit()},tryhtmlMethod=function(){hideElement("maskDiv"),$a("verify_domain").style.display="",hideElement("valfailed"),changeMethod("2")},closeValdiv=function(){hideElement("maskDiv"),hideElement("valfailed")},closeProceedDiv=function(){hideElement("maskDiv"),$a("confirmPopdiv").style.display="none",$a("confirmTxtPopdiv").style.display="none"},mailHostDomain=function(){if(0==isMailHosted){var param={};param.mode="verifydom",param.dname=mail_domain,cpAjax(conPath+"/domainAct.do",param,function(){isMailHosted=!0,mailHostDomainCallBack()})}else mailHostDomainCallBack()},mailHostDomainCallBack=function(){isMBExists?gotoNextPage(adduser_status>setupStatus?adduser_status:orgHasVerifiedDomains?mx_status:setupStatus):gotoMailBoxTab()};var unameregex=/^[a-zA-Z0-9]([\w-._]*)$/;gotoMailBoxTab=function(){closeAllDiv(),setupStatus=mailaccount_status,cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(setupStatus),function(){$a("domaintick").className="ticksel"}),isDomainVerified=!0,pshtoGA("admin_acc_popup"),$a("admin_Acccount").style.display="",$(window).scrollTop(0),hideElement("lodingDiv")},createAdminAcc=function(){var aliasName=$a("adminEmail").value.trim();if(""==aliasName)return showElement("adminEmail.warnmsg"),!1;if(!aliasName.match(unameregex))return showElement("adminEmail.warnmsg1"),!1;showElement("lodingDiv");var emailid=aliasName+"@"+$a("adminDomain").value.trim();if(isMailBoxExists){var param={};param.mode="a",param.e=emailid,param.cud="no",param.z=zid,param=addZOIDinReqUrl(param,"param"),cpAjax("/cpanel/userDetails.do",param,function(){gotoNextPage(adduser_status),hideElement("lodingDiv")})}else{var param={};param.mode="createMailAccount",param.e=emailid,param.z=zid,param=addZOIDinReqUrl(param,"param"),cpAjax("/cpanel/userDetails.do",param,function(){pshtoGA("admin_acc_created"),gotoNextPage(adduser_status),hideElement("lodingDiv")})}},gotoNextPage=function(requestedStatus){if(showElement("lodingDiv"),orgHasVerifiedDomains&&(requestedStatus==adduser_status?requestedStatus=mx_status:requestedStatus>mx_status&&(requestedStatus=mx_status)),requestedStatus>setupStatus){setupStatus=requestedStatus;var params;params=0==setupStatus?addOrgSetupStatusParam(setupStatus):updateOrgSetupStatusParam(setupStatus),cpAjax(conPath+"/orgAct.do",params,function(){openDiv(setupStatus)})}else openDiv(requestedStatus)};var displayLiveChat=function(){if($(".lvcht").click(function(){var url=livechaturl+"/drawchat.ls?embedname="+livechatembedname+"&referrer="+encodeURIComponent(window.btoa(document.referrer));url+="&pagetitle="+encodeURIComponent(window.document.title),window.open(url,"","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=no,width=400,height=500")}),isDomainVerified&&"false"!=mxRecord)$(".lvcht").hide();else{$(".lvcht").fadeIn().css("display","inline-block");for(var i=0;3>i;i++)$(".lvcht").animate({bottom:"+=10px"},300).animate({bottom:"-=12px"},300);$(".lvcht").animate({bottom:"5px"},300)}};claimBonusUsers=function(referralCode){var rfrlcode=referralCode.trim();return""==rfrlcode?(showErrMsg(specifyrfrlcode),!1):rfrlcode.match(alphaNumericExp)?(param={},param.mode="verifyInvite",param.invcode=rfrlcode,param=addZOIDinReqUrl(param,"param"),showElement("lodingDiv"),void cpAjax(conPath+"/orgAct.do",param,function(){isBaihui?gotosetupDonefn():gotoNextPage(mobileaccess_status),hideElement("lodingDiv")})):(showErrMsg(rfrlcodeInvalid),!1)};var maxIdleTime=10,idleCounter=0,chkIdle=function(){idleCounter++,idleCounter>maxIdleTime?(idleCounter=0,displayLiveChat()):setTimeout(chkIdle,1e3)};gotoZmail=function(){pshtoGA("mailpage_redirection"),addZOIDinReqUrl("/biz/index.do","pageReload")},gotoControlPanel=function(){addZOIDinReqUrl(conPath+"/index.do","pageReload")},gotoBizControlPanel=function(url){deleteCookie("dmnRetUrl"),addZOIDinReqUrl(url,"pageReload")},gotoCPAddUser=function(){showElement("lodingDiv"),pshtoGA("add_users_redirection"),cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(groups_status),function(){addZOIDinReqUrl(conPath+"/index.do?tabmode=useradd"+leftOption+"&dname="+mail_domain,"pageReload"),hideElement("lodingDiv")})},gotoGroupPage=function(){showElement("lodingDiv"),pshtoGA("add_groups_redirection"),cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(mx_status),function(){addZOIDinReqUrl(conPath+"/index.do?tabmode=addgroup"+leftOption+"&dname="+mail_domain,"pageReload"),hideElement("lodingDiv")})},gotoMigrationPage=function(){showElement("lodingDiv"),pshtoGA("migration_redirection"),cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(mail_client_status),function(){addZOIDinReqUrl(conPath+"/index.do?tabmode=migration"+leftOption+"&dname="+mail_domain,"pageReload"),hideElement("lodingDiv")})},gotoDocsSetupPage=function(){var nxtStatus=mobileaccess_status;$a("claim_referral")&&(nxtStatus=claim_referral_status),showElement("lodingDiv"),pshtoGA("privileges_redirection"),cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(nxtStatus),function(){addZOIDinReqUrl(conPath+"/index.do?tabmode=privileges"+leftOption+"&dname="+mail_domain,"pageReload"),hideElement("lodingDiv")})},gotoMailAccountsPage=function(){showElement("lodingDiv"),pshtoGA("mail_accounts_redirection"),cpAjax(conPath+"/orgAct.do",updateOrgSetupStatusParam(done_status),function(){addZOIDinReqUrl(conPath+"/index.do?tabmode=mailAccountsmode"+leftOption+"&dname="+mail_domain,"pageReload"),hideElement("lodingDiv")})};var emailExp=/^[\w]([\w\-\.\+\']*)@([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,22}$/,domainExp=/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,22}$/,splchar=/[\`\~\!\@\#\$\%\^\&\*\(\)\+\=\,\<\>\?\/\:\;\'\"\{\}\\\|\[\]]/,objRegExp=/^([^`'"\/\\?&#%><|,%$*:@;]*)$/i,portalNameRegExp=/^([^`'"\/\\?&#%><|,%$*:@;.]*)$/i,objRegExp1=/^([^`'"\/\\?&#%><|,%$*:;]*)$/i,alphaNumericExp=/^[a-zA-Z0-9]*$/,nameExp=/[<>&'"]/,orgTitleRegExp=/[<>&'"]/,numExp=/^[0-9]+$/,currentPage="dashboard",nonsecparam="http",secparam="https",pageLI={},param={},locationFetched=!1,locationCount=0,saScroll=!1,supIndex=0,afterload="",bodyheight=0,bodywidth=0,zbheader=28,domainheader=34,cptop=0,sublink=28,zbheaderorg=35,supAdmin,loadedJs={},resultAlert="";pageLI.dashboard="cpanel-1",pageLI.domains="cpanel-2",pageLI.userdetails="cpanel-3",pageLI.useraccess="cpanel-12",pageLI.groups="cpanel-4",pageLI.privileges="cpanel-5",pageLI.applications="cpanel-7",pageLI.subscription="cpanel-9",pageLI.allowedips="cpanel-10",pageLI.samlauthentication="cpanel-11",pageLI.passwordpolicy="cpanel-13",pageLI.mailaccounts="cpanel-6a",pageLI.troubleshoot="cpanel-6c",pageLI.mailpolicy="cpanel-6d",pageLI.migration="cpanel-6e",pageLI.orgset="cpanel-6f";var disassociate_obj={};$a=function(id){return document.getElementById(id)},$1=function(txt){return document.createElement(txt)},"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(suffix){return-1!==this.indexOf(suffix,this.length-suffix.length)});var timeoutObj;String.prototype.trim=function(){var x=this;return x=x.replace(/^\s*(.*)/,"$1"),x=x.replace(/(.*?)\s*$/,"$1")},evaluate=function(res){return"object"==typeof res?res:"string"==typeof res?JSON.parse(res.replace(/'/g,'"')):res},isValidResult=function(result,hideMessage){return closeDiv($a("lodingDiv")),closeDiv($a("ms1")),1==result[0]?!0:(hideMessage||(result[1].st?showErrMsg(result[1].st):result[1].e&&showErrMsg(result[1].e)),!1)},displayDiv=function(divId){if(divId){divId.style.display="";var aTop=(document.body.offsetHeight-divId.offsetHeight)/2,aLeft=(document.body.offsetWidth-divId.offsetWidth)/2;divId.style.top=aTop+"px",divId.style.left=aLeft+"px",divId.style.display=""}},showMsg=function(msgs,isErr){$("#spanMessage").text(msgs),$("#spanMessage").removeAttr("style"),$("#spanMessage").css({"background-color":"#FACA48",border:"none","line-height":"20px","text-align":"center"}),$a("ms1").style.display="";var aLeft=(document.body.offsetWidth-$a("ms1").offsetWidth)/2;$a("ms1").style.left=aLeft+"px",timeoutObj&&clearTimeout(timeoutObj);var dur=6e3;isErr&&(dur=1e4),timeoutObj=setTimeout(function(){closeDiv($a("ms1"))},dur)},showErrMsg=function(msgs,isHTML,info){if(isHTML)$a("spanMessage").innerHTML='<div style="float:right;position:relative;right:-10px;top:1px;" class="errqclose"></div>'+msgs;else{var div=document.createElement("div");div.className="errqclose",$a("spanMessage").innerHTML="",div.setAttribute("style","float:right;position:relative;right:-10px;top:1px;"),$a("spanMessage").appendChild(div),$a("spanMessage").appendChild(document.createTextNode(msgs))}$("#spanMessage .errqclose").click(function(){closeDiv($a("ms1"))}),$("#spanMessage").removeAttr("style");var bgcolor="#F67784";info&&(bgcolor="#489D5B"),$("#spanMessage").css({"background-color":bgcolor,border:"none","word-wrap":"break-word","line-height":"normal","text-align":"center","font-size":"14px","border-radius":"4px",padding:"6px 20px 6px 15px",color:"#fff"}),$a("ms1").style.display="";var aLeft=(document.body.offsetWidth-$a("ms1").offsetWidth)/2;$a("ms1").style.left=aLeft+"px",timeoutObj&&clearTimeout(timeoutObj)},showMsgUntil=function(msgs,isHtml){isHtml?($a("spanMessage").innerHTML="",$a("spanMessage").appendChild(msgs)):$("#spanMessage").text(msgs),$("#spanMessage").css({"background-color":"#FACA48",border:"none"}),$a("ms1").style.display="";var aLeft=(document.body.offsetWidth-$a("ms1").offsetWidth)/2;$a("ms1").style.left=aLeft+"px"},showDiv=function(obj){obj&&(obj.style.display="")},closeDiv=function(obj){obj&&(obj.style.display="none")},showElement=function(ele){$a(ele)&&($a(ele).style.display="")},hideElement=function(ele){$a(ele)&&($a(ele).style.display="none")},getValue=function(ele){return $a(ele)?"B"==$a(ele).nodeName?$a(ele).innerHTML:$a(ele).value:0},setValue=function(ele,val){$a(ele)&&("B"==$a(ele).nodeName?$a(ele).innerHTML=val:$a(ele).value=val)},getinnerHTML=function(ele){return $a(ele)?"INPUT"==$a(ele).nodeName?$a(ele).value:$a(ele).innerHTML:void 0},setinnerHTML=function(ele,val){$a(ele)&&("INPUT"==$a(ele).nodeName?$a(ele).value=val:$("#"+ele).text(val))},setHTML=function(ele,val){$a(ele)&&("INPUT"==$a(ele).nodeName?$a(ele).value=val:$a(ele).innerHTML=val)},getClass=function(ele){return $a(ele)?$a(ele).className:void 0},setClass=function(ele,val){$a(ele)&&($a(ele).className=val)},specialcharreplace=function(val){return val=val.replace(/&amp;/g,"&"),val=val.replace(/&lt;/g,"<"),val=val.replace(/&gt;/g,">"),val=val.replace(/&quot;/g,'"'),val=val.replace(/&apos;/g,"'"),val=val.replace(/&#39;/g,"'")},isNumeric=function(elem){var numericExpression=/^[0-9]+$/;return elem.value.match(numericExpression)?!0:!1},inArray=function(str,arr){for(var key in arr){var tempstr=arr[key];if(tempstr=tempstr.toString(),tempstr.trim()==str.trim())return!0}return!1},newfeedback=function(){displayDiv($a("feedback")),$a("fsubject").focus()},sendFeedBack=function(){var fsub=$a("fsubject").value.trim(),toAddress=$a("feedBckToAdd").value.trim(),userAgent=navigator.userAgent,fcomments=$a("fcomments").value;return""==$a("fcomments").value?(showMsg($a("comments").value),!1):void cpAjax("/biz/feedback.do",{perZoho:"false",toaddress:toAddress,subject:fsub,text:fcomments,userAgent:userAgent},function(){closeDiv($a("feedback"))})},feedre=function(){showMsg($a("thfdbck").value)},createOrg=function(){var orgname=$a("orgname").value.trim();if(""==orgname)return showErrMsg($a("orgname1").value),!1;if(orgname.length>100)return showErrMsg($a("maxlengthmsg").value),!1;showMsgUntil($a("creatingorg").value,!1);var param={};param.mode="createOrg",param.createOrg=orgname,cpAjax(conPath+"/userDetailsAct.do",param,function(){addZOIDinReqUrl("","pageReload")})},tabSelection=function(obj){obj&&(deselectTab(obj),obj.className="spselc")},removeChNode=function(tab){for(;tab.childNodes[0];)tab.removeChild(tab.childNodes[0])},tabSelectionId=function(id,pos){var obj=$a(id).getElementsByTagName("span")[pos];tabSelection(obj)},deselectTab=function(obj){if(obj){var arr=obj.parentNode.getElementsByTagName("span");for(var i in arr)arr[i].className&&"spselc"==arr[i].className&&(arr[i].className="spunselc")}},revspecialcharrep=function(val){return val=val.replace(/&/g,"&amp;"),val=val.replace(/</g,"&lt;"),val=val.replace(/>/g,"&gt;"),val=val.replace(/\"/g,"&quot;"),val=val.replace(/'/g,"&apos;"),val=val.replace(/'/g,"&#39;")},getCookie=function(cname){for(var docCookie=document.cookie.split(";"),i=0;i<docCookie.length;i++){var x=docCookie[i].substr(0,docCookie[i].indexOf("=")),y=docCookie[i].substr(docCookie[i].indexOf("=")+1);if(null!=x&&x.trim()==cname)return unescape(y)}},setCookie=function(cname,value,exdays){var exdate=new Date;exdate.setDate(exdate.getDate()+exdays);var cvalue=escape(value)+(null==exdays?"":"; expires="+exdate.toUTCString());document.cookie=cname+"="+cvalue},deleteCookie=function(cname){document.cookie=cname+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},checkCookie=function(cname,value){var c_name=getCookie(cname);return c_name&&c_name==value?!0:!1},in_array=function(str,arr){for(var key in arr){var tempstr=arr[key];if(tempstr=tempstr.toString(),tempstr.trim()==str.trim())return!0}return!1},loadAjaxError=function(){$(document).ajaxError(function(event,jqxhr){var result=JSON.parse(jqxhr.responseText);return"AUTHENTICATION_FAILED"===result[1].st?(window.location.href="/biz/login",!1):void showErrorMesg(result[1].st)})},hideErrorMesg=function(){$(".zmerror").hide()},showErrorMesg=function(msg){$(".zmerror").length>0?$(".zmerror").show():($("body").append("<div class='zmerror' id='iam_disDiv' style='position: absolute; left: 10px; z-index: 1700; top: 11px; display: block;'><table cellspacing='0' cellpadding='5' border='0' align='center'><tbody><tr><td id='iam_disMsg'></td><td><div onclick=\"hideErrorMesg();\"></div></td></tr></tbody></table></div>"),$("#iam_disMsg").text(msg))},hideAll=function(){hideElement("mask_div")},addZOIDinReqUrl=function(paramUrlForm,type){if($a("childZOID"))if("param"===type)paramUrlForm.zoid=$a("childZOID").value;else if("url"===type)paramUrlForm=paramUrlForm+(-1!=paramUrlForm.indexOf("?")?"&":"?")+"zoid="+$a("childZOID").value;else if("form"==type){var form=$a(paramUrlForm+"");if(null==form.zoid){var input=document.createElement("input");input.setAttribute("type","hidden"),input.setAttribute("name","zoid"),input.setAttribute("value",$a("childZOID").value),$a(paramUrlForm+"").appendChild(input)}else form.zoid.value=$a("childZOID").value}if("pageReload"===type||"pageReloadInTab"===type){$a("childZOID")&&$a("partnerPortalZoid")&&($a("partnerPortalZoid").value=$a("childZOID").value);var formObj=$a("partnerPortalForm");formObj?(formObj.action=""!==paramUrlForm?paramUrlForm:"",formObj.target="pageReloadInTab"===type?"_blank":"",formObj.submit()):"pageReloadInTab"===type?window.open(paramUrlForm):window.location.reload()}return paramUrlForm},addPagination=function(index,limit,havingTotalCount,count,objToAdd,prevFunc,nextFunc){if(objToAdd.innerHTML="",count>0){var cnt,nextUser=$1("div");nextUser.className="zbnextda";var prevUser=$1("div");prevUser.className="zbprevda";var span=$1("span");span.setAttribute("style","float:left;"),index>=limit&&(prevUser.onclick=function(){prevFunc(index-limit)}),havingTotalCount?(index+limit>=count?cnt=count:(cnt=index+limit,nextUser.onclick=function(){nextFunc(index+limit)}),$(span).text(index+1+" - "+cnt+" "+$a("commonOF").value+" "+count)):(count>limit?(nextUser.onclick=function(){nextFunc(index+limit)},cnt=index+limit):cnt=index+count,$(span).text(index+1+" - "+cnt)),objToAdd.appendChild(prevUser),objToAdd.appendChild(span),objToAdd.appendChild(nextUser)}return!0},gotosetupPage=function(){addZOIDinReqUrl(conPath+"/verify.do?dname="+$a("setupDomain").value,"pageReload")},hideBand=function(){$a("pricingBand")&&(hideElement("pricingBand"),onresize())},hideMXBanner=function(){setCookie("mxban","hide",14),hideElement("mxbanner")},showChatBar=function(){chatBar=!0,contentsize()},hideChatBar=function(){chatBar=!1,contentsize()},contentsize=function(){if(bodyheight=document.body.clientHeight,bodywidth=document.body.clientWidth,-1!=getInternetExplorerVersion()&&(bodyheight=document.documentElement.clientHeight),"undefined"!=typeof isReadOnly&&isReadOnly&&(bodyheight-=22),isFuji)try{var portalHeight=window.SkyDeskPortalEmbed&&SkyDeskPortalEmbed.height()||0,chatbarHeight=window.SkyDeskPortalEmbed&&SkyDeskPortalEmbed.chatbarHeight()||0;bodyheight=bodyheight-portalHeight-chatbarHeight}catch(e){}if(!isFuji){var xScroll=!1,yScroll=!1;"scroll"==document.body.style.overflowY&&(yScroll=!0),"scroll"==document.body.style.overflowX&&(xScroll=!0),400>bodyheight?(bodyheight=400,document.body.style.height="400px",document.body.style.overflowY="scroll"):(xScroll&&(bodyheight+=15),document.body.style.height=bodyheight,maillanding||(document.body.style.overflowY="hidden")),800>bodywidth?(bodywidth=800,document.body.style.width="800px",document.body.style.overflowX="scroll"):(yScroll&&(bodywidth+=15),document.body.style.width=bodywidth,document.body.style.overflowX="hidden")}if(cptop=0,docs||removeTop||(cptop=40,chatstatus&&chatBar&&(bodyheight-=20),$a("pricingBand")&&""==$a("pricingBand").style.display&&(bodyheight-=22)),"undefined"!=typeof isReseller&&isReseller&&(bodyheight-=30),$a("footerDiv")&&(bodyheight-=47,chatstatus&&chatBar&&$a("footerDiv").setAttribute("style","bottom:25px")),$a("menu")&&($a("menu").style.height=bodyheight-(zbheader+cptop+10)+"px"),maillanding||($a("container").style.height=bodyheight-(cptop+13)+"px"),"dashboard"==currentPage){$a("orgtfadiv")&&tfaenabled===!0?$a("orgtfadiv").style.display="":$a("orgtfadiv")&&tfaenabled===!1&&($a("orgtfadiv").style.display="none");var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("general")&&($a("general").style.height=div_height+"px"),$a("locations")&&($a("locations").style.height=div_height+"px"),$a("others")&&($a("others").style.height=div_height+"px"),$a("tfa")&&($a("tfa").style.height=div_height+"px"),$a("dashboard.scroll")&&($a("dashboard.scroll").style.height=div_height+"px"),$a("dashboard.location")&&($a("dashboard.location").style.height=div_height-18+"px")}else if("userdetails"==currentPage){$a("usertfadiv")&&tfaenabled===!0?$a("usertfadiv").style.display="":$a("usertfadiv")&&tfaenabled===!1&&($a("usertfadiv").style.display="none");var div_height=bodyheight-(cptop+zbheader+sublink+11),div_userList=bodyheight-(cptop+zbheader+sublink+9);if($a("user.zbusercontentDiv").style.height=div_userList-zbheader+"px",$a("user.zbinvicontentDiv").style.height=div_userList-zbheader+"px",$a("importuser").style.height=div_userList+"px",$a("adduser").style.height=div_height+"px",$a("importuser").style.height=div_height+"px",$a("resetpasswd").style.height=div_height+"px",$a("userDetails").style.height=div_height+"px",$a("emailids").style.height=div_height+"px",$a("tfaUsers")&&($a("tfaUsers").style.height=div_height+"px"),$a("allowedips").style.height=div_height+"px",$a("mailAccounsdiv").style.height=div_height+"px",$a("UsrLogCont").style.height=div_userList-zbheader-zbheader+7+"px",$a("userSessionsDetails").style.height=div_height+"px",$a("user.emailIds").style.height=div_height-52+"px",$a("user.allowedips").style.height=div_height-52+"px",$a("crm_import").style.height=div_height+"px",$a("user.userDetails").style.height=div_height-16+"px",$a("user.photoDiv").style.height=div_height-16+"px",$a("users.leftbox").style.height=div_height-32+"px",$a("add_alias")){var Top=(document.body.offsetHeight-$a("add_alias").offsetHeight)/2;$a("add_alias").style.top=Top+"px"}}else if("domains"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("domain.zbcontentDiv").style.height=div_height-$a("domain.zbheaderDiv").offsetHeight+"px",$a("domain.addDomainDiv").style.height=div_height+"px",$a("domain.domainAlias").style.height=div_height+"px",$a("domain.subdomainStripping").style.height=div_height+"px",$a("domain.summaryDiv").style.height=div_height+"px",$a("changeCardDetails").style.height=div_height+"px",isbaihui||($a("domain.failureDiv").style.height=div_height+"px",$a("regDomain.content").style.height=bodyheight-(cptop+domainheader+sublink+11)+"px")}else if("buydomain"==currentPage)$a("regDomain.content").style.height=bodyheight-(cptop+domainheader+sublink+11)+"px";else if("applications"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("zohoapps_div").style.height=div_height+"px",$a("orgapps_div").style.height=div_height-51+"px"}else if("privileges"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("policy.policyList").style.height=div_height+"px"}else if("groups"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("groups.GroupsList").style.height=div_height+"px"}else if("subscription"==currentPage){var div_height=bodyheight-(cptop+zbheader+11);$a("pricing_summary").style.height=div_height+"px"}else if(maillanding||"pricingDetails"!=currentPage){if("allowedips"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("allowedip.mainDiv").style.height=div_height+"px",$a("allowedip.subDiv").style.height=div_height-52+"px"}else if("people"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("innerpage.contentDiv").style.height=div_height+"px"}else if("samlauthentication"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("saml_config").style.height=div_height+"px"}else if("useraccess"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11),div_userList=bodyheight-(cptop+zbheader+11);$a("list_view").style.height=div_userList+"px"}else if("passwordpolicy"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11+1);$a("passwPolici").style.height=div_height+"px"}else if("bonususer"==currentPage){var div_height=bodyheight-(cptop+zbheader+11);$a("referralPgm").style.height=div_height+"px",$a("claimbonusPgm").style.height=div_height+"px"}else if("mailstorage"==currentPage){var div_height=bodyheight-(cptop+zbheader+sublink+11+1);$a("storageDetails.mainDiv").style.height=div_height+"px",$a("storageDetails.subDiv").style.height=div_height-72+"px",$a("storageDetailsReport.subDiv").style.height=div_height-72+"px"}else if("managecustomers"==currentPage){var div_height=bodyheight-(cptop+zbheader+11+1);$a("manageOtherOrgs").style.height=div_height+"px",$a("childOrgDets").style.height=div_height+"px",$a("addNewOrg").style.height=div_height+"px",$a("addOrgSuccess").style.height=div_height+"px",$a("noOrg").style.height=div_height+"px"}}else{var div_height=bodyheight-(cptop+zbheader+sublink+11);maillanding&&(div_height=bodyheight-120),maillanding||void 0!=contactUser&&contactUser==zuid?($a("pricing.domainDiv").style.height=div_height+"px",$a("pricing.storeDiv").style.height=div_height+"px",$a("pricing.contentDiv").style.height=div_height+"px",maillanding&&(div_height+=50),$a("pricing.purchaseDiv").style.height=div_height+"px"):$a("pricing.contentDiv").style.height=div_height+zbheader+"px"}if($a("summary.inner")&&$a("summary.inner1"))if(-1!=requestURL.indexOf("domain.do")){showElement("business.button"),showElement("controlpanel.button");var div_height=bodyheight-95;$a("summary.inner").style.height=div_height-40+"px",$a("summary.inner1").style.height=div_height-42+"px",$a("summary.help").style.height=div_height-225}else{var div_height=bodyheight-(cptop+zbheader+sublink+11);$a("summary.inner").style.height=div_height-40+"px",$a("summary.inner1").style.height=div_height-42+"px",$a("summary.help").style.height=div_height-15+"px"}};var closeSADrop=function(){supAdmin&&supAdmin.listDom&&supAdmin.listDom.hide()};handleMouse=function(){hideElement("crDropbox"),hideElement("clDropbox"),hideElement("csDropbox"),hideElement("searchDropbox"),hideElement("importDropbox"),hideElement("actionDropbox"),closeSADrop()},handleKey=function(event){"27"==event.keyCode&&handleMouse()},isAuthenticated=function(){param={},param.mode="isAuthenticated",cpAjax(conPath+"/userDetailsAct.do",param,function(){})};var cpHashFunc=new function(){};cpHashFunc={hashObj:{},subscribeToHash:function(){$.each(cpanelData,function(obj){cpHash.register(obj,cpHashFunc.hashActions)}),$.each(MailAdmindata,function(obj){cpHash.register(obj,cpHashFunc.hashActions)})},checkforValid:function(service,type){var validid="getPage"==type?cpanelData[service].id:MailAdmindata[service].id;return"buydomain"==service&&null!=$a("buydomainLink")&&$a("buydomainLink")?!0:$a(validid)?!0:!1},hashActions:function(service,arg,updateHash,type){cpHashFunc.checkforValid(service,type)||(service="dashboard",type="getPage",arg=["general"],updateHash="true"),"function"==typeof window[type]&&window[type](service,arg,updateHash),cpHashFunc.handleHash(service,arg.join("/"),{trigger:"false",update:updateHash})},handleHash:function(service,param,option){param=param||"",option=option||{},cpHashFunc.hashObj[service]=param,param&&"/"!==param.charAt(0)&&(param="/"+param),option.update&&"true"==option.update&&cpHash.setHash(service,param,option)},addHash:function(service,arg){cpHashFunc.hashObj[service]||"";cpHashFunc.handleHash(service,arg,{trigger:"false",update:"true"})},updateHash:function(service,arg,updateHash){var isUpdate=updateHash||"true";"true"==isUpdate&&cpHashFunc.addHash(service,arg)},validhashkey:function(){var hash=cpHash.decode();return MailAdmindata.hasOwnProperty(hash.key)||cpanelData.hasOwnProperty(hash.key)?!0:!1}},zmLazyLoad=function(item,type,callback){if(void 0===loadedJs[item+type]||loadedJs[item+type]===!1){var path,files=void 0;if("js"===type?(path=jsPath,"undefined"!=typeof cpanelData[item]&&(files=useCompression?cpanelData[item].c_js:cpanelData[item].js)):(path=cssPath,"undefined"!=typeof cpanelCss[item]&&(files=useCompression?cpanelCss[item].c_css:cpanelCss[item].css)),void 0!==files){var filesToUpload;if("string"==typeof files)filesToUpload=path+files;else{filesToUpload=[];for(var i=0;i<files.length;i++)filesToUpload[i]=path+files[i]}loadedJs[item+type]=!0,filesToUpload.length>0?LazyLoad[type](filesToUpload,callback):callback()}else callback()}else callback()},LoadActionFunc=function(service,arg,updateHash){var callback=cpanelData[service].callback;"function"==typeof window[callback]&&window[callback](service,arg,updateHash),changeSelection($a(cpanelData[service].id))},getPage=function(service,arg,updateHash,funcParam){var url=cpanelData[service].jsp;url=addZOIDinReqUrl(url,"url"),displayDiv($a("lodingDiv"));$.post(url,function(resultData){$a("container").innerHTML=resultData,currentPage=service,zmLazyLoad(service,"css",function(){zmLazyLoad(service,"js",function(){"buydomain"==service&&funcParam?renewPurchase(funcParam.domainName,funcParam.isDBP,funcParam.dId):LoadActionFunc(service,arg,updateHash)})}),contentsize()})},getExternalPage=function(service,arg,updateHash){var mailadminmenu={spamcontrol:["spf","dkim","whitelist","blacklist","allowlist","quarantine"],orgsettings:["general","domaindisclaimer","antispam","catchall","notification","domainkeys"],emailrouting:["emaildeliveryoptions","incominggateway","outgoinggateway"],troubleshoot:["auditlogs","blockedaccounts","retrymail","userswithoutmailbox"],groups:["addgroup"],migration:["addmigration"],tools:["checkmx"]},url=MailAdmindata[service].url,containerDiv="container";void 0!=arg&&(arg=arg[0]),"creategroup"==afterload&&(-1!=groupsUrl.indexOf("mailGroups.do")&&(url=groupsUrl.substring(0,groupsUrl.indexOf("mailGroups.do"))+"addGroup.do"),-1!=groupsUrl.indexOf("fromAdminPage")&&(url=groupsUrl.substring(0,groupsUrl.indexOf("fromAdminPage"))+"creategroup")),mailadminmenu.hasOwnProperty(service)&&-1!=mailadminmenu[service].indexOf(arg)&&(url=url.concat("&arg="+arg)),afterload="",currentPage="",contentsize(),displayDiv($a("lodingDiv")),url=addZOIDinReqUrl(url,"url"),$("#"+containerDiv).html("");var iframe=$1("iframe");iframe.id="mailframe",iframe.src=url,iframe.width="100%",iframe.height="100%",iframe.frameBorder="0",$a(containerDiv).appendChild(iframe),$("#mailframe").unbind().load(function(){closeDiv($a("lodingDiv"))}),changeSelection($a(MailAdmindata[service].id)),cpHashFunc.updateHash(service,arg,updateHash)},getInnerPage=function(pageUrl,pageTitle){displayDiv($a("lodingDiv")),$.post(conPath+"/jsp/cpanelinner.jsp",function(resultData){currentPage="people",$a("container").innerHTML=resultData,$("#innerpage.title").text(pageTitle),$a("innerpage.src").src=pageUrl,contentsize(),closeDiv($a("lodingDiv"))})},getGroups=function(){domainEnabled?getExternalPage("groups",""):getPage("groups")},changeSelection=function(obj){for(var arr=$a("cpanel").getElementsByTagName("li"),i=0;i<arr.length;i++)arr[i].className&&"seltd"==arr[i].className?arr[i].className="":arr[i].className&&"zbslst zbslstDivPar seltd"==arr[i].className?arr[i].className="zbslst zbslstDivPar":arr[i].className&&"zbslst zbslstDivPar zbcpfs seltd"==arr[i].className?arr[i].className="zbslst zbslstDivPar zbcpfs":arr[i].className&&"zbslstDiv seltd"==arr[i].className&&(arr[i].className="zbslstDiv");return obj?($a("cpanel-6")&&($a("cpanel-6").className="",$a("cpanel-6j")&&($a("cpanel-6j").className="zbslst zbslstDivPar zbcpfs")),"cpanel-6"==obj.id&&($a("cpanel-6a").className="seltd"),void("cpanel-6ja"==obj.id?($a("cpanel-6ja").className="zbslstDiv seltd",$a("cpanel-6j")&&($a("cpanel-6j").className="zbslst zbslstDivPar zbcpfs seltdHead",$("#cpanel-6j").find("div").removeClass("zbarrclose").addClass("zbarropen"),$a("cpanel-6ja").style.display=""),$a("cpanel-6").className="seltdHead"):(obj.className="seltd",("cpanel-6a"==obj.id||"cpanel-6c"==obj.id||"cpanel-6e"==obj.id||"cpanel-6d"==obj.id||"cpanel-6f"==obj.id||"cpanel-6g"==obj.id||"cpanel-6h"==obj.id||"cpanel-6k"==obj.id||"cpanel-6i"==obj.id)&&($a("cpanel-6").className="seltdHead",obj.className="zbslst zbslstDivPar seltd")))):!1},removeSelection=function(){for(var arr=$a("cpanel").getElementsByTagName("li"),i=0;i<arr.length;i++)arr[i].className&&"seltd"==arr[i].className?arr[i].className="":arr[i].className&&"zbslst seltd"==arr[i].className&&(arr[i].className="zbslst")},showExp=function(obj,tab){"mail"==tab&&("zbdown"==obj.className?(obj.className="zbup",closeDiv($a("cpanel-6a")),closeDiv($a("cpanel-6c")),closeDiv($a("cpanel-6d")),closeDiv($a("cpanel-6e")),closeDiv($a("cpanel-6f")),closeDiv($a("cpanel-6g")),closeDiv($a("cpanel-6h")),closeDiv($a("cpanel-6i")),closeDiv($a("cpanel-6j")),closeDiv($a("cpanel-6ja")),closeDiv($a("cpanel-6k"))):"zbup"==obj.className&&(obj.className="zbdown",showDiv($a("cpanel-6a")),showDiv($a("cpanel-6c")),showDiv($a("cpanel-6d")),showDiv($a("cpanel-6e")),showDiv($a("cpanel-6f")),showDiv($a("cpanel-6g")),showDiv($a("cpanel-6h")),showDiv($a("cpanel-6i")),showDiv($a("cpanel-6j")),showDiv($a("cpanel-6ja")),showDiv($a("cpanel-6k"))))},showMailAuth=function(obj,e){e.stopPropagation(),"zbarropen"==obj.className?(obj.className="zbarrclose",closeDiv($a("cpanel-6ja"))):"zbarrclose"==obj.className&&(obj.className="zbarropen",showDiv($a("cpanel-6ja")))},gotoPaymntPage=function(){hasActiveBuyDomains?goToSubscription():gotoOneStore()},gotoOneStore=function(){var win=window.open(pricingLnk,"_blank");win.focus()},goToSubscription=function(){var subscriptionPage="cpanel-9";if(null==$a(subscriptionPage))getPage("subscription");else{var evnt=$a(subscriptionPage).onclick;"function"==typeof evnt&&$a(subscriptionPage).onclick()}},goToStorageDetails=function(){var mailStoragePage="cpanel-14";if(null==$a(mailStoragePage))getPage("mailstorage");else{var evnt=$a(mailStoragePage).onclick;"function"==typeof evnt&&$a(mailStoragePage).onclick()}},goToOrgDetails=function(){var orgDetailsPage="cpanel-1";if(null==$a(orgDetailsPage))getPage("dashboard");else{var evnt=$a(orgDetailsPage).onclick;"function"==typeof evnt&&$a(orgDetailsPage).onclick()}},importContactsFromGoogle=function(serviceUrl,limit){var url=gadgetsServerUrl+"/gcontacts?zservice=zmail&target=contactsImport&attachLimit="+limit+"&required=emailIds&overlay=no&serURL="+scheme+"://"+business_url+serviceUrl;if(showElement("maskDiv"),0==$("#contactsImport").length){var subframe=$("<iframe id='contactsImport' frameborder='0' src='"+url+"' height='100%' width='100%' style='overflow:scroll;'></iframe>");$("#google").append(subframe)}else $a("contactsImport").src=url;displayDiv($a("google"))},hideAllMaskDiv=function(){hideElement("maskDiv"),$a("google")&&closeDiv($a("google"))},registerMailChat=function(){if(chatstatus){document.domain.endsWith(zohoUrl)||WebMessanger.useSameDomain(),WebMessanger.setNoDomainChange(),WebMessanger.enableSST(),isFuji&&(WebMessanger.setRebrand("fuji"),WebMessanger.disableMeeting(),WebMessanger.setIamServer(secparam+"://accounts."+zohoUrl),WebMessanger.setChatServer(nonsecparam+"://chat."+zohoUrl+"/"),WebMessanger.setPhotoServer(secparam+"://contacts."+zohoUrl),WebMessanger.setCalendarServer(secparam+"://calendar."+zohoUrl),WebMessanger.setMailServer(secparam+"://mail."+zohoUrl+"/"),WebMessanger.setJsStaticDomain(staticJsUrl),WebMessanger.setCssStaticDomain(staticCssUrl)),("zh"==language||"ja"==language)&&WebMessanger.setLocale(language,language);var settings=WMSSessionConfig.CHAT|WMSSessionConfig.CHAT_PRESENCE|WMSSessionConfig.PRESENCE_ORG|WMSSessionConfig.PRESENCE_PERSONAL|WMSSessionConfig.MULTI_DISPATCH|WMSSessionConfig.CROSS_PRD;chatstatus||(settings=WMSSessionConfig.MULTI_DISPATCH|WMSSessionConfig.CROSS_PRD),WebMessanger.setConfig(settings),WebMessanger.enableGlobalSearch(),WebMessanger.disableDragDrop(),WebMessanger.registerZuid(chatServiceName,ZUID+"",primaryEmail)}},cpAjax=function(url,params,callbackfunc){var dontValidate=!1,customErrMsg="";"dontValidate"in params?(dontValidate=!0,delete params.dontValidate):"customErrMsg"in params&&(customErrMsg=params.customErrMsg,delete params.customErrMsg),params[csrfParamName]=csrfToken,$.ajax({url:url,type:"POST",data:params,success:function(resultData){var data=evaluate(resultData);if(dontValidate)callbackfunc(data);else{if(""!=customErrMsg){if(1!=data[0])return showErrMsg(customErrMsg),closeDiv($a("lodingDiv")),!1}else if(!isValidResult(data))return!1;callbackfunc(data[1])}closeDiv($a("lodingDiv"))},error:function(jqXHR){var data=evaluate(jqXHR.responseText);null!=data&&showErrMsg(data[1].e),closeDiv($a("lodingDiv"))}})};